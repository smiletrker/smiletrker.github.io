(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n(210)},109:function(e,t,n){},110:function(e,t,n){},121:function(e,t){},123:function(e,t){},156:function(e,t){},157:function(e,t){},204:function(e,t,n){e.exports=n.p+"static/media/test.ccd20247.jpg"},206:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(99),i=n.n(c),s=(n(109),n(16)),o=n(17),l=n(19),u=n(18),p=n(20),m=n(213),d=n(212),h=n(103),f=n.n(h),v=(n(110),n(211)),b=(a.Component,n(60)),g=n(6),x=n.n(g),w=n(13),y=n(214),j=n(11);function E(){return O.apply(this,arguments)}function O(){return(O=Object(w.a)(x.a.mark(function e(){var t;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/models",e.next=3,j.k(t);case 3:return e.next=5,j.i(t);case 5:return e.next=7,j.h(t);case 7:return e.next=9,j.j(t);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(w.a)(x.a.mark(function e(t){var n,a,r,c,i,s,o=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:512,.5,a=new j.c({inputSize:n,scoreThreshold:.5}),!0,e.next=6,j.g(t);case 6:return r=e.sent,c=j.e(r,a),e.next=10,c.withFaceExpressions();case 10:return i=e.sent,e.next=13,j.d(r);case 13:return s=e.sent,i.vector=s,e.abrupt("return",i);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C=.5;function M(e){return U.apply(this,arguments)}function U(){return(U=Object(w.a)(x.a.mark(function e(t){var n,a,r;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t),a=n.map(function(e){return new j.b(t[e].name,t[e].descriptors.map(function(e){return new Float32Array(e)}))}),r=new j.a(a,C),e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var R=n(204),_=n(97),I={imageURL:R,fullDesc:null,detections:null,descriptors:null,match:null},L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=Object(w.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return e.t0=n,e.next=5,M(_);case 5:return e.t1=e.sent,e.t2={faceMatcher:e.t1},e.t0.setState.call(e.t0,e.t2),e.next=10,n.handleImage(n.state.imageURL);case 10:case"end":return e.stop()}},e)})),n.handleImage=Object(w.a)(x.a.mark(function e(){var t,a,r=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:n.state.imageURL,e.next=3,k(t).then(function(e){e&&n.setState({fullDesc:e,detections:e.map(function(e){return e.detection})})});case 3:if(!n.state.descriptors||!n.state.faceMatcher){e.next=8;break}return e.next=6,n.state.descriptors.map(function(e){return n.state.faceMatcher.findBestMatch(e)});case 6:a=e.sent,n.setState({match:a});case 8:case"end":return e.stop()}},e)})),n.handleFileChange=function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.resetState(),e.next=3,n.setState({imageURL:URL.createObjectURL(t.target.files[0]),loading:!0});case 3:n.handleImage();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.resetState=function(){n.setState(Object(b.a)({},I))},n.state=Object(b.a)({},I,{faceMatcher:null}),n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.imageURL,n=e.detections,a=e.match,c=null;return n&&(c=n.map(function(e,t){var n=e.box.height,c=e.box.width,i=e.box._x,s=e.box._y;return r.a.createElement("div",{key:t},r.a.createElement("div",{style:{position:"absolute",border:"solid",borderColor:"green",height:n,width:c,transform:"translate(".concat(i,"px,").concat(s,"px)")}},a&&a[t]?r.a.createElement("p",{style:{backgroundColor:"green",border:"solid",borderColor:"green",width:c,marginTop:0,color:"#fff",transform:"translate(-3px,".concat(n,"px)")}},a[t]._label):null))})),r.a.createElement("div",null,r.a.createElement("input",{id:"myFileUpload",type:"file",onChange:this.handleFileChange,accept:".jpg, .jpeg, .png"}),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement("img",{src:t,alt:"imageURL"})),c||null))}}]),t}(a.Component),D=Object(y.a)(L),F=n(102),W=n.n(F),B=(n(206),n(97)),N=160,T=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentWillMount=Object(w.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:return e.t0=n,e.next=5,M(B);case 5:e.t1=e.sent,e.t2={faceMatcher:e.t1},e.t0.setState.call(e.t0,e.t2),n.setInputDevice();case 9:case"end":return e.stop()}},e)})),n.setInputDevice=function(){navigator.mediaDevices.enumerateDevices().then(function(){var e=Object(w.a)(x.a.mark(function e(t){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.filter(function(e){return"videoinput"===e.kind});case 2:if(!(e.sent.length<2)){e.next=8;break}return e.next=6,n.setState({facingMode:"user"});case 6:e.next=10;break;case 8:return e.next=10,n.setState({facingMode:{exact:"environment"}});case 10:n.startCapture();case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},n.startCapture=function(){n.interval=setInterval(function(){n.capture()},200)},n.capture=Object(w.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.webcam.current){e.next=4;break}return e.next=3,k(n.webcam.current.getScreenshot(),N).then(function(e){if(e){var t;try{var a=(t=n.state.vectors).map(function(t){return j.f(t,e.vector)});Math.min(a)>.5&&t.push(e.vector)}catch(s){console.log(s),t=[e.vector]}var r,c=e.map(function(e){var t=e.expressions;return t.sort(function(e,t){return t.probability-e.probability}),t}),i=0;try{r=c[0][0].expression,"happy"!==n.state.lastemotion?"happy"===r&&(i=1,n.props.startSmiling(),document.showSmiles()):"happy"!==r&&n.props.stopSmiling()}catch(s){}n.setState({vectors:t,detections:e.map(function(e){return e.detection}),descriptors:c,lastemotion:r,smilecounter:n.state.smilecounter+i})}});case 3:n.state.descriptors&&n.state.faceMatcher;case 4:case"end":return e.stop()}},e)})),n.webcam=r.a.createRef(),n.state={fullDesc:null,detections:null,descriptors:null,faceMatcher:null,match:null,lastemotion:null,smilecounter:0,facingMode:"user"},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.detections,n=e.match,a=e.facingMode,c=e.descriptors,i=null;a&&(i={width:420,height:420,facingMode:a});var s=null;return t&&(s=t.map(function(e,t){var a=e.box.height,i=e.box.width,s=e.box._x,o=e.box._y,l="black";try{l={neutral:"white",surprised:"white",angry:"red",sad:"red",fearful:"red",disgusted:"white",happy:"#4CCEB1"}[c[t][0].expression]}catch(u){console.log(u)}return r.a.createElement("div",{key:t},r.a.createElement("div",{style:{position:"absolute",border:"solid",borderColor:l,height:a,width:i,transform:"translate(".concat(s,"px,").concat(o,"px)")}},n&&n[t]?r.a.createElement("p",{style:{backgroundColor:"blue",border:"solid",borderColor:"blue",width:i,marginTop:0,color:"#fff",transform:"translate(-3px,".concat(a,"px)")}},n[t]._label):null))})),r.a.createElement("div",{className:"Camera"},r.a.createElement("div",{style:{width:420,height:420}},r.a.createElement("div",{style:{position:"relative",width:420}},i?r.a.createElement("div",{style:{position:"absolute"}},r.a.createElement(W.a,{audio:!1,width:420,height:420,ref:this.webcam,screenshotFormat:"image/jpeg",videoConstraints:i})):null,s||null)))}}]),t}(a.Component),A=Object(y.a)(T),J=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).startSmiling=function(){n.setState({smilecounter:n.state.smilecounter+1,smiling:!0})},n.stopSmiling=function(){n.setState({smilecounter:n.state.smilecounter,smiling:!1})},n.createSmiles=function(){if(n.state.smiling){for(var e=[],t=["\ud83d\ude01","\ud83d\ude0d","\ud83d\udc4d","\ud83d\ude05","\ud83e\udd29","\ud83d\ude1c","\ud83d\ude2c","\ud83e\udd20","\ud83d\ude38","\ud83d\ude3b","\ud83d\udca9"],a=t[Math.floor(Math.random()*t.length)],c=0;c<50;c++){var i={position:"absolute",left:Math.random()*window.innerWidth+"px",top:Math.random()*window.innerHeight+"px"};e.push(r.a.createElement("div",{class:"smile_transform visible_smile",id:"smile_"+c,style:i},a))}return e}},n.state={smilecounter:0},n}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{class:"canvas"},r.a.createElement("div",{className:"info-text"},"Max smiles per day \u2013 247"),r.a.createElement(A,{startSmiling:this.startSmiling,stopSmiling:this.stopSmiling}),r.a.createElement("div",{class:"counter-panel boxed "+(this.state.smiling?"counter-panel-animation":"scaled")},r.a.createElement("div",{id:"timesClicked",class:"number"},this.state.smilecounter),r.a.createElement("div",{class:"item-wrapper"},r.a.createElement("div",{class:"item"},"smiles"),r.a.createElement("div",{class:"item"},"today"))),this.createSmiles()))}}]),t}(a.Component),z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{history:f()({basename:""})},r.a.createElement("div",{className:"route"},r.a.createElement(d.a,{exact:!0,path:"/",component:J}),r.a.createElement(d.a,{exact:!0,path:"/upload",component:D}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e){e.exports={Cherprang:{name:"face1",descriptors:[[-.08113786578178406,.05256778374314308,.009473100304603577,-.10561250895261765,-.1783013790845871,-.04459364339709282,-.09838695079088211,-.11281408369541168,.15290355682373047,-.12802188098430634,.22490034997463226,-.0876401960849762,-.20344389975070953,-.06546909362077713,-.09518688917160034,.21771210432052612,-.1978156566619873,-.20811164379119873,-.005263347178697586,.022171149030327797,.08166252076625824,-.024958046153187752,-.008690833114087582,.07264935970306396,-.09877212345600128,-.32639357447624207,-.07010464370250702,-.05077863112092018,-.06450583040714264,-.08223631232976913,.03569770231842995,.0591503381729126,-.19877424836158752,.005495572462677956,.032966941595077515,.10699400305747986,.00043915724381804466,-.10360816866159439,.17986394464969635,-.040484149008989334,-.30697202682495117,.03211132436990738,.08842744678258896,.19950658082962036,.15933744609355927,-.03205663338303566,.0013319365680217743,-.16289959847927094,.14904619753360748,-.15430817008018494,.0096973218023777,.14715969562530518,.08346439152956009,.031750328838825226,-.016189731657505035,-.1357622593641281,.03173140063881874,.1332130879163742,-.1280241757631302,-.03812456876039505,.10302945971488953,-.06710688769817352,-.0045883068814873695,-.18414227664470673,.19671869277954102,.05899167060852051,-.13076898455619812,-.2127394676208496,.09676400572061539,-.15055659413337708,-.1203978881239891,.0671667754650116,-.15655417740345,-.21337451040744781,-.33455413579940796,.0025228180456906557,.32778817415237427,.12706099450588226,-.18636029958724976,.077443927526474,.04969285428524017,.0199972465634346,.04955039545893669,.18967756628990173,-.0021310225129127502,.10583700984716415,-.09680759161710739,-.0061607323586940765,.237107053399086,-.07061111927032471,-.0200827457010746,.20259839296340942,-.025431372225284576,.097686767578125,.024423770606517792,-.0027051493525505066,-.05065762251615524,.05029483884572983,-.18550457060337067,.04197317361831665,-.06792200356721878,.0047242967411875725,-.020428016781806946,.061017416417598724,-.0777672529220581,.09362616389989853,-.018073776736855507,.00793382991105318,-.11228518187999725,.011685803532600403,-.09283971041440964,-.05933531001210213,.12439746409654617,-.177815243601799,.20367340743541718,.12916350364685059,.16568998992443085,.14472319185733795,.18697629868984222,.07876216620206833,-.025242770090699196,-.02333880588412285,-.17500267922878265,.011992575600743294,.09926775842905045,-.05089148133993149,.1372077465057373,.017258809879422188]]}}}},[[104,1,2]]]);
//# sourceMappingURL=main.37145028.chunk.js.map